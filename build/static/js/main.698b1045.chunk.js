(this["webpackJsonptasks-dashboard"]=this["webpackJsonptasks-dashboard"]||[]).push([[0],{98:function(e,t,c){},99:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),r=c(39),s=c.n(r),i=c(1),o=c.n(i),u=c(7),j=c(10),l=c(114),d=c(110),b=c(111),O=c(104),h=c(9),p=c(81),f=c(19),x=c(82),m={apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_APP_ID,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_DATABASE_URL},v=Object(p.a)(m),S=Object(f.g)(v),g=(Object(x.a)(),c(36)),E=c(4),w=n.a.createContext(),T=Object(g.d)(v);function y(){return Object(a.useContext)(w)}function k(e){var t=e.children,c=Object(a.useState)(),n=Object(j.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(!1),l=Object(j.a)(i,2),d=l[0],b=l[1],O=Object(a.useState)(),p=Object(j.a)(O,2),x=p[0],m=p[1],v=Object(a.useState)(!0),y=Object(j.a)(v,2),k=y[0],_=y[1];function N(){return(N=Object(u.a)(o.a.mark((function e(t,c,a,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.i)(Object(f.d)(S,"users",t),{name:a,role:c,email:n}).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(o.a.mark((function e(t){var c,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(f.d)(S,"users",t),e.next=3,Object(f.e)(c);case 3:if(!(a=e.sent).exists()){e.next=9;break}return n=a.data().role,e.abrupt("return",n);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(u.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.f)(Object(f.b)(S,"users"));case 2:return t=e.sent,c=[],t.forEach((function(e){var t=Object(h.a)({id:e.id},e.data());c.push(t)})),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(o.a.mark((function e(t){var c,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(f.d)(S,"users",t),e.next=3,Object(f.e)(c);case 3:if(!(a=e.sent).exists()){e.next=9;break}return n=a.data().name,e.abrupt("return",n);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(u.a)(o.a.mark((function e(t){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(f.h)(Object(f.b)(S,"tasks"),Object(f.k)("assignedUserId","==",t)),e.next=3,Object(f.f)(c);case 3:return(a=e.sent).forEach((function(e){Object(f.j)(Object(f.d)(S,"tasks",e.id),{assignedUserId:0}).catch((function(e){console.log(e)}))})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){return Object(g.e)(T,(function(e){s(e),e&&(R(e.uid).then((function(e){"admin"===e&&b(!0)})),D(e.uid).then((function(e){m(e)}))),_(!1)}))}),[]);var L={currentUser:r,currentUserAdmin:d,currentUserName:x,signup:function(e,t){return Object(g.b)(T,e,t)},login:function(e,t){return Object(g.h)(T,e,t)},logout:function(){return T.signOut()},resetPassword:function(e){return Object(g.g)(T,e)},updateUserName:function(e){return Object(f.j)(Object(f.d)(S,"users",r.uid),{name:e}).catch((function(e){console.log(e)}))},updateUserEmail:function(e){return Object(g.i)(T.currentUser,e).then((function(){Object(f.j)(Object(f.d)(S,"users",r.uid),{email:e})})).catch((function(e){console.log(e)}))},updateUserPassword:function(e){return Object(g.j)(T.currentUser,e)},updateUserRole:function(e){return Object(f.j)(Object(f.d)(S,"users",r.uid),{role:e}).catch((function(e){console.log(e)}))},createUserDoc:function(e,t,c,a){return N.apply(this,arguments)},getUserRole:R,getUsersList:function(){return U.apply(this,arguments)},getUserNameById:D,deleteUserAccount:function(e){var t=r.email,c=g.a.credential(t,e),a=r.uid;return Object(g.f)(T.currentUser,c).then((function(){Object(g.c)(T.currentUser)})).then((function(){Object(f.c)(Object(f.d)(S,"users",a))})).then((function(){!function(e){P.apply(this,arguments)}(a)}))}};return Object(E.jsx)(w.Provider,{value:L,children:!k&&t})}var _=c(18),N=c(26);function R(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(a.useRef)(),s=y(),i=s.signup,h=s.createUserDoc,p=Object(a.useState)(""),f=Object(j.a)(p,2),x=f[0],m=f[1],v=Object(a.useState)(!1),S=Object(j.a)(v,2),g=S[0],w=S[1],T=Object(_.g)();function k(){return k=Object(u.a)(o.a.mark((function a(s){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s.preventDefault(),c.current.value===n.current.value){a.next=3;break}return a.abrupt("return",m("Passwords do not match"));case 3:return a.prev=3,m(""),w(!0),a.next=8,i(t.current.value,c.current.value).then((function(c){h(c.user.uid,r.current.value,e.current.value,t.current.value)})).then((function(){w(!1),T("/")})).catch((function(e){var t=e.code,c=e.message;m("auth/weak-password"===t?"The password is too weak.":c)}));case 8:a.next=14;break;case 10:a.prev=10,a.t0=a.catch(3),console.log(a.t0.message),m("Failed to create an account");case 14:case"end":return a.stop()}}),a,null,[[3,10]])}))),k.apply(this,arguments)}return Object(E.jsxs)("div",{className:"card-container mx-auto",children:[Object(E.jsx)(l.a,{children:Object(E.jsxs)(l.a.Body,{children:[Object(E.jsx)("h2",{className:"text-center",children:"Sign Up"}),x&&Object(E.jsx)(d.a,{variant:"danger",children:x}),Object(E.jsxs)(b.a,{onSubmit:function(e){return k.apply(this,arguments)},children:[Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"name",children:[Object(E.jsx)(b.a.Label,{children:"Name"}),Object(E.jsx)(b.a.Control,{type:"text",placeholder:"Enter name",ref:e,required:!0})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"email",children:[Object(E.jsx)(b.a.Label,{children:"Email address"}),Object(E.jsx)(b.a.Control,{type:"email",placeholder:"Enter email",ref:t,required:!0})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"password",children:[Object(E.jsx)(b.a.Label,{children:"Password"}),Object(E.jsx)(b.a.Control,{type:"password",placeholder:"Password",ref:c,required:!0})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"password-confirm",children:[Object(E.jsx)(b.a.Label,{children:"Confirm your Password"}),Object(E.jsx)(b.a.Control,{type:"password",placeholder:"Password",ref:n,required:!0})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"role",children:[Object(E.jsx)(b.a.Label,{children:"Role"}),Object(E.jsxs)(b.a.Select,{ref:r,children:[Object(E.jsx)("option",{value:"admin",children:"Admin"}),Object(E.jsx)("option",{value:"user",children:"User"})]})]}),Object(E.jsx)(O.a,{disabled:g,variant:"primary",type:"submit",children:"Submit"})]})]})}),Object(E.jsxs)("div",{className:"w-100 text-center mt-3",children:["Already have an account? ",Object(E.jsx)(N.b,{to:"/login",children:"Log in"})]})]})}var C=c(108),U=n.a.createContext();function D(){return Object(a.useContext)(U)}function A(e){var t=e.children,c=Object(a.useState)(),n=Object(j.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(!0),l=Object(j.a)(i,2),d=l[0],b=l[1];function O(){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.f)(Object(f.b)(S,"tasks"));case 2:return t=e.sent,c=[],t.forEach((function(e){var t=Object(h.a)({id:e.id},e.data());c.push(t)})),s(c),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){O().then((function(){b(!1)}))}),[]);var x={tasks:r,getTasks:O,setStatus:function(e,t){var c=Object(f.d)(S,"tasks",e);return Object(f.j)(c,{status:t}).catch((function(e){console.log(e.message)})),O().then((function(e){s(e),b(!1)})),r},addTask:function(e,t,c){return Object(f.a)(Object(f.b)(S,"tasks"),{assignedUserId:c,content:e,title:t,status:"to do"}).catch((function(e){console.log(e)}))},updateTask:function(e,t,c,a){return Object(f.j)(Object(f.d)(S,"tasks",e),{assignedUserId:a,content:t,title:c}).catch((function(e){console.log(e)}))},deleteTask:function(e){return Object(f.c)(Object(f.d)(S,"tasks",e))}};return Object(E.jsx)(U.Provider,{value:x,children:!d&&t})}var P=c(106),L=c(112),F=function(e){var t=e.onDrop,c=e.children,a=e.status,n=Object(L.a)((function(){return{accept:"TASKCARD",drop:function(e,c){t(e.id,c,a)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}})),r=Object(j.a)(n,2),s=r[0],i=s.canDrop,o=s.isOver,u=r[1];return Object(E.jsx)("div",{ref:u,className:"column col-md-3 py-2",children:Object(E.jsxs)("div",{className:"p-3 h-100 position-relative",style:{backgroundColor:o?"#ffff9494":"rgb(197 237 255 / 44%)"},children:[c,i?"Release to drop":""]})})},I=c(113),B=c(73);function H(e){var t=e.item,c=e.index,n=e.color,r=e.isDraggable,s=Object(a.useState)(),i=Object(j.a)(s,2),o=i[0],u=i[1],d=y().getUserNameById,b=Object(I.a)((function(){return{type:"TASKCARD",item:Object(h.a)({id:c},t),canDrag:function(){return r},collect:function(e){return{isDragging:e.isDragging()}}}})),O=Object(j.a)(b,2),p=O[0].isDragging,f=O[1];return t.assignedUserId&&d(t.assignedUserId).then((function(e){u(e)})),Object(E.jsx)(l.a,{className:"task-card mb-2 position-relative",ref:f,"data-id":t.id,bg:"light",style:{opacity:p?.5:1},children:Object(E.jsxs)(l.a.Body,{className:"py-4",children:[o&&Object(E.jsx)(B.a,{bg:"secondary",className:"assignee position-absolute top-0 start-0",children:Object(E.jsx)("i",{children:o})}),Object(E.jsx)(B.a,{bg:n,className:"item-status position-absolute top-0 end-0",children:t.status}),Object(E.jsx)(l.a.Title,{className:"item-title mb-0 h6 transition-300",children:t.title})]})})}var K=[{id:0,status:"to do",color:"primary"},{id:1,status:"in progress",color:"warning"},{id:2,status:"in review",color:"info"},{id:3,status:"done",color:"success"}],G=c(107),W=c(86),V=c(109);function q(e){var t=e.show,c=e.setShowModal,n=e.updateTasks,r=Object(a.useRef)(),s=Object(a.useRef)(),i=Object(a.useRef)(),o=y().getUsersList,u=Object(a.useState)(),l=Object(j.a)(u,2),h=l[0],p=l[1],f=Object(a.useState)(!0),x=Object(j.a)(f,2),m=x[0],v=x[1],S=D().addTask,g=Object(a.useState)(""),w=Object(j.a)(g,2),T=w[0],k=w[1],_=Object(a.useState)(""),N=Object(j.a)(_,2),R=N[0],C=N[1];return Object(a.useEffect)((function(){o().then((function(e){p(e),v(!1)}))}),[]),Object(E.jsxs)(E.Fragment,{children:[R&&Object(E.jsx)(d.a,{variant:"danger",children:R}),T&&Object(E.jsx)(d.a,{variant:"success",children:T}),!m&&Object(E.jsxs)(V.a,{show:t,onHide:function(){c()},children:[Object(E.jsx)(V.a.Header,{closeButton:!0,children:Object(E.jsx)(V.a.Title,{children:"Add New Task"})}),Object(E.jsx)(V.a.Body,{children:Object(E.jsxs)(b.a,{onSubmit:function(e){e.preventDefault(),C(""),k("");var t=r.current.value,a=s.current.value,o=0;i.current.value&&(o=i.current.value),a&&t&&S(a,t,o).then((function(){k("Task was added to dashboard."),n(),c()}))},children:[Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"title",children:[Object(E.jsx)(b.a.Label,{children:"Title"}),Object(E.jsx)(b.a.Control,{type:"text",placeholder:"Enter title",ref:r,required:!0})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"content",children:[Object(E.jsx)(b.a.Label,{children:"Content"}),Object(E.jsx)(b.a.Control,{as:"textarea",placeholder:"Enter content",ref:s,required:!0})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"user",children:[Object(E.jsx)(b.a.Label,{children:"Assign user"}),Object(E.jsx)(b.a.Select,{ref:i,children:h.map((function(e){return Object(E.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(E.jsx)(O.a,{variant:"primary",type:"submit",children:"Add Task"})]})})]})]})}var M=c(74);function J(e){var t=e.show,c=e.showEditTask,n=e.item,r=Object(a.useRef)(),s=Object(a.useRef)(),i=Object(a.useRef)(),l=y().getUsersList,h=Object(a.useState)(),p=Object(j.a)(h,2),f=p[0],x=p[1],m=Object(a.useState)(!0),v=Object(j.a)(m,2),S=v[0],g=v[1],w=D().updateTask,T=Object(a.useState)(""),k=Object(j.a)(T,2),_=k[0],N=k[1],R=Object(a.useState)(""),C=Object(j.a)(R,2),U=C[0],A=C[1];function P(){return(P=Object(u.a)(o.a.mark((function e(t){var a,u,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),A(""),N(""),a=r.current.value,u=s.current.value,j=0,i.current.value&&(j=i.current.value),!u||!a){e.next=10;break}return e.next=10,w(n.id,u,a,j).then((function(){N("Task ".concat(n.title," was successfully updated.")),c()})).catch((function(){A("Failed to upade the task.")}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){l().then((function(e){x(e),g(!1)}))}),[]),Object(E.jsxs)(E.Fragment,{children:[U&&Object(E.jsx)(d.a,{variant:"danger",children:U}),_&&Object(E.jsx)(d.a,{variant:"success",children:_}),n&&!S&&Object(E.jsxs)(V.a,{show:t,onHide:function(){c()},children:[Object(E.jsx)(V.a.Header,{closeButton:!0,children:Object(E.jsxs)(V.a.Title,{children:["Edit Task: ",n.title]})}),Object(E.jsx)(V.a.Body,{children:Object(E.jsxs)(b.a,{onSubmit:function(e){return P.apply(this,arguments)},children:[Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"title",children:[Object(E.jsx)(b.a.Label,{children:"Title"}),Object(E.jsx)(b.a.Control,{type:"text",placeholder:"Enter title",ref:r,defaultValue:n.title,required:!0})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"content",children:[Object(E.jsx)(b.a.Label,{children:"Content"}),Object(E.jsx)(b.a.Control,{as:"textarea",placeholder:"Enter content",ref:s,defaultValue:n.content,required:!0})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"user",children:[Object(E.jsx)(b.a.Label,{children:"Assigned user"}),Object(E.jsx)(b.a.Select,{ref:i,defaultValue:n.assignedUserId,children:f.map((function(e){return Object(E.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(E.jsx)(O.a,{variant:"primary",type:"submit",children:"Save"})]})})]})]})}function Y(e){var t=e.show,c=e.showTaskDetails,n=e.item,r=e.color,s=e.assignedUser,i=e.handleUpdateTasks,l=e.closeTask,b=e.admin,h=Object(a.useState)(""),p=Object(j.a)(h,2),f=p[0],x=p[1],m=Object(a.useState)(""),v=Object(j.a)(m,2),S=v[0],g=v[1],w=Object(a.useState)(!1),T=Object(j.a)(w,2),y=T[0],k=T[1],_=Object(a.useState)(!1),N=Object(j.a)(_,2),R=N[0],C=N[1],U=D().deleteTask;function A(){l(),i(),k(!y)}function P(){return(P=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(n.id).then((function(){L(),i(),x("Task ".concat(n.title," was sucessfully deleted."))})).catch((function(){g("Failed to delete the task.")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){C(!R)}return Object(E.jsxs)(E.Fragment,{children:[S&&Object(E.jsx)(d.a,{variant:"danger",children:S}),f&&Object(E.jsx)(d.a,{variant:"success",children:f}),n&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(J,{show:y,showEditTask:A,item:n}),Object(E.jsx)(V.a,{show:R,onHide:L,children:Object(E.jsxs)(V.a.Body,{children:[Object(E.jsxs)("p",{children:["Are you sure you want to delete the task ",Object(E.jsx)("b",{children:n.title}),"?"]}),Object(E.jsx)(O.a,{variant:"primary me-2",onClick:function(){return P.apply(this,arguments)},children:"Delete"}),Object(E.jsx)(O.a,{variant:"primary",onClick:L,children:"Cancel"})]})}),Object(E.jsxs)(V.a,{show:t,onHide:function(){l()},children:[Object(E.jsx)(V.a.Header,{closeButton:!0,children:Object(E.jsx)(V.a.Title,{children:n.title})}),Object(E.jsx)(V.a.Body,{children:Object(E.jsxs)("div",{className:"task mb-2 position-relative",bg:"light",children:[Object(E.jsx)(B.a,{bg:r,className:"item-status mb-2",children:n.status}),Object(E.jsx)("div",{className:"item-text",children:n.content}),s&&Object(E.jsxs)("div",{className:"assigned",children:[Object(E.jsx)("b",{children:"Assignee:"})," ",s]}),b&&Object(E.jsxs)("div",{className:"task-footer d-flex pt-2",children:[Object(E.jsx)(O.a,{variant:"link btn-icon me-2",onClick:function(){c(),C(!R)},children:Object(E.jsx)(M.b,{})}),Object(E.jsx)(O.a,{variant:"link btn-icon",onClick:A,children:Object(E.jsx)(M.a,{})})]})]})})]})]})]})}var z=c(85);function Q(){var e=y(),t=e.currentUser,c=e.getUserNameById,n=e.currentUserAdmin,r=e.getUserRole,s=Object(a.useState)(t),i=Object(j.a)(s,2),o=i[0],u=i[1],l=D(),d=l.tasks,b=l.getTasks,h=l.setStatus,p=Object(a.useState)(d),f=Object(j.a)(p,2),x=f[0],m=f[1],v=Object(a.useState)(n),S=Object(j.a)(v,2),g=S[0],w=S[1],T=Object(a.useState)(!1),k=Object(j.a)(T,2),_=k[0],N=k[1],R=function(e,t,c){h(e,c)},C=Object(a.useState)(!1),U=Object(j.a)(C,2),A=U[0],L=U[1],I=Object(a.useState)(!1),B=Object(j.a)(I,2),V=B[0],M=B[1],J=Object(a.useState)(),Q=Object(j.a)(J,2),X=Q[0],Z=Q[1],$=Object(a.useState)(),ee=Object(j.a)($,2),te=ee[0],ce=ee[1],ae=Object(a.useState)(),ne=Object(j.a)(ae,2),re=ne[0],se=ne[1];Object(a.useEffect)((function(){t&&(N(!0),r(t.uid).then((function(e){null===e&&u(!1),w("admin"===e)})).then((function(){N(!1)})))}),[]);var ie=function(){L(!A)},oe=function(){b().then((function(e){m(e)}))},ue=function(e){if(e){var t=e.target.parentNode.getAttribute("data-id"),a=d.find((function(e){return e.id===t}));a.assignedUserId&&c(a.assignedUserId).then((function(e){ce(e)}));var n=K.find((function(e){return e.status===a.status}));se(n.color),Z(a)}M(!V)};return Object(E.jsx)("div",{children:!_&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(q,{show:A,setShowModal:ie,updateTasks:oe}),Object(E.jsx)(Y,{show:V,showTaskDetails:ue,closeTask:function(){M(!1)},item:X,assignedUser:te,handleUpdateTasks:oe,color:re,admin:g}),Object(E.jsx)(P.a,{className:"mt-4",children:Object(E.jsx)(G.a,{backend:W.a,children:K.map((function(e,t){return Object(E.jsxs)(F,{onDrop:R,status:e.status,children:[0===t&&g?Object(E.jsx)(O.a,{variant:"link",className:"btn-icon btn-add",onClick:ie,children:Object(E.jsx)(z.a,{})}):"",Object(E.jsx)("h3",{className:"h5 col-header text-center pb-1",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),x.filter((function(t){return t.status===e.status})).map((function(t,c){return Object(E.jsx)("div",{className:"task-container",onClick:ue,children:o?Object(E.jsx)(H,{item:t,index:c,color:e.color,isDraggable:!0},t.id):Object(E.jsx)(H,{item:t,index:c,color:e.color,isDraggable:!1},t.id)},t.id)}))]},e.id)}))})})]})})}function X(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=y().login,n=Object(a.useState)(""),r=Object(j.a)(n,2),s=r[0],i=r[1],h=Object(a.useState)(!1),p=Object(j.a)(h,2),f=p[0],x=p[1],m=Object(_.g)();function v(){return v=Object(u.a)(o.a.mark((function a(n){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,i(""),x(!0),a.next=6,c(e.current.value,t.current.value).catch((function(e){var t=e.code,c=e.message;i("auth/weak-password"===t?"The password is too weak.":c)}));case 6:m("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),i("Failed to log in");case 12:x(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])}))),v.apply(this,arguments)}return Object(E.jsxs)("div",{className:"card-container mx-auto",children:[Object(E.jsx)(l.a,{className:"mt-4",children:Object(E.jsxs)(l.a.Body,{children:[Object(E.jsx)("h2",{className:"text-center",children:"Log In"}),s&&Object(E.jsx)(d.a,{variant:"danger",children:s}),Object(E.jsxs)(b.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"email",children:[Object(E.jsx)(b.a.Label,{children:"Email address"}),Object(E.jsx)(b.a.Control,{type:"email",placeholder:"Enter email",ref:e,required:!0})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"password",children:[Object(E.jsx)(b.a.Label,{children:"Password"}),Object(E.jsx)(b.a.Control,{type:"password",placeholder:"Password",ref:t,required:!0})]}),Object(E.jsx)(O.a,{disabled:f,variant:"primary",type:"submit",children:"Log In"})]}),Object(E.jsx)("div",{className:"w-100 text-center",children:Object(E.jsx)(N.b,{to:"/forgot-password",children:"Forgot password?"})})]})}),Object(E.jsxs)("div",{className:"w-100 text-center mt-3",children:["Don't have an account? ",Object(E.jsx)(N.b,{to:"/signup",children:"Sign up"})]})]})}function Z(){var e=Object(a.useRef)(),t=Object(a.useState)(""),c=Object(j.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(""),i=Object(j.a)(s,2),h=i[0],p=i[1],f=Object(a.useState)(!1),x=Object(j.a)(f,2),m=x[0],v=x[1],S=y().resetPassword;function g(){return(g=Object(u.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.prev=1,p(""),r(""),v(!0),t.next=7,S(e.current.value);case 7:p("Further instructions were sent to your email."),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r("Failed to reset password");case 13:v(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(l.a,{children:Object(E.jsxs)(l.a.Body,{children:[Object(E.jsx)("h2",{className:"text-center",children:"Forgot password"}),n&&Object(E.jsx)(d.a,{variant:"danger",children:n}),h&&Object(E.jsx)(d.a,{variant:"success",children:h}),Object(E.jsxs)(b.a,{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"email",children:[Object(E.jsx)(b.a.Label,{children:"Email address"}),Object(E.jsx)(b.a.Control,{type:"email",placeholder:"Enter email",ref:e,required:!0})]}),Object(E.jsx)(O.a,{disabled:m,variant:"primary",type:"submit",children:"Reset password"})]})]})}),Object(E.jsxs)("div",{className:"w-100 text-center mt-3",children:[Object(E.jsx)("p",{children:Object(E.jsx)(N.b,{to:"/login",children:"Log in"})}),Object(E.jsx)("p",{children:Object(E.jsx)(N.b,{to:"/",children:"Go to Dashboard"})})]})]})}var $=c(8);function ee(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),n=Object(a.useRef)(),r=Object(a.useRef)(),s=Object(a.useRef)(),i=y(),h=i.currentUser,p=i.currentUserAdmin,f=i.currentUserName,x=i.getUserRole,m=i.getUserNameById,v=i.updateUserName,S=i.updateUserPassword,g=i.updateUserEmail,w=i.updateUserRole,T=i.deleteUserAccount,k=Object(a.useState)(""),R=Object(j.a)(k,2),C=R[0],U=R[1],D=Object(a.useState)(""),A=Object(j.a)(D,2),P=A[0],L=A[1],F=Object(a.useState)(!1),I=Object(j.a)(F,2),B=I[0],H=I[1],K=Object(_.g)(),G=Object(a.useState)(p?"admin":"user"),W=Object(j.a)(G,2),q=W[0],M=W[1],J=Object(a.useState)(f),Y=Object(j.a)(J,2),z=Y[0],Q=Y[1],X=Object(a.useState)(!1),Z=Object(j.a)(X,2),ee=Z[0],te=Z[1];function ce(){return(ce=Object(u.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),U(""),!e.current.value){t.next=13;break}return t.prev=3,t.next=6,T(e.current.value).then((function(){K("/")})).catch((function(e){var t=e.message;console.log(e),ae(),U("Failed to delete account : "+t)}));case 6:t.next=13;break;case 8:t.prev=8,t.t0=t.catch(3),console.log(t.t0),ae(),U("Failed to delete account");case 13:case"end":return t.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}function ae(){te(!ee)}return Object(a.useEffect)((function(){H(!0),m(h.uid).then((function(e){Q(e)})),x(h.uid).then((function(e){M(e)})).then((function(){H(!1)}))}),[]),Object(E.jsx)("div",{className:"card-container mx-auto",children:!B&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(V.a,{className:"text-center",show:ee,onHide:ae,children:Object(E.jsxs)(V.a.Body,{children:[Object(E.jsx)("p",{children:"Are you sure you want to delete your account?"}),Object(E.jsxs)(b.a,{onSubmit:function(e){return ce.apply(this,arguments)},children:[Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"relogPassword",children:[Object(E.jsx)(b.a.Label,{children:"Password"}),Object(E.jsx)(b.a.Control,Object($.a)({type:"password",placeholder:"Password",ref:e},"placeholder","Please enter your password"))]}),Object(E.jsx)(O.a,{variant:"primary mb-2",type:"submit",children:"Delete"})]}),Object(E.jsx)(O.a,{variant:"primary",onClick:ae,children:"Cancel"})]})}),Object(E.jsx)(l.a,{className:"mt-4",children:Object(E.jsxs)(l.a.Body,{children:[Object(E.jsx)("h2",{className:"text-center",children:"Update profile"}),C&&Object(E.jsx)(d.a,{variant:"danger",children:C}),P&&Object(E.jsx)(d.a,{variant:"sucess",children:P}),Object(E.jsxs)(b.a,{onSubmit:function(e){if(e.preventDefault(),n.current.value!==r.current.value)return U("Passwords do not match");var a=[];U(""),L(""),H(!0),t.current.value!==z&&a.push(v(t.current.value)),c.current.value!==h.email&&a.push(g(c.current.value)),n.current.value&&a.push(S(n.current.value)),s.current.value!==q&&a.push(w(s.current.value)),Promise.all(a).then((function(){L("Your profile was updated."),K("/")})).catch((function(){U("Failed to update an account")}))},children:[Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"name",children:[Object(E.jsx)(b.a.Label,{children:"Name"}),Object(E.jsx)(b.a.Control,{type:"text",placeholder:"Enter name",ref:t,defaultValue:z})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"email",children:[Object(E.jsx)(b.a.Label,{children:"Email address"}),Object(E.jsx)(b.a.Control,{type:"email",placeholder:"Enter email",ref:c,defaultValue:h.email})]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"password",children:[Object(E.jsx)(b.a.Label,{children:"Password"}),Object(E.jsx)(b.a.Control,Object($.a)({type:"password",placeholder:"Password",ref:n},"placeholder","Leave blank to keep the same"))]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"password-confirm",children:[Object(E.jsx)(b.a.Label,{children:"Confirm your Password"}),Object(E.jsx)(b.a.Control,Object($.a)({type:"password",placeholder:"Confirm Password",ref:r},"placeholder","Leave blank to keep the same"))]}),Object(E.jsxs)(b.a.Group,{className:"mb-3",id:"role",children:[Object(E.jsx)(b.a.Label,{children:"Role"}),Object(E.jsxs)(b.a.Select,{ref:s,defaultValue:q,children:[Object(E.jsx)("option",{value:"admin",children:"Admin"}),Object(E.jsx)("option",{value:"user",children:"User"})]})]}),Object(E.jsx)(O.a,{disabled:B,variant:"primary",type:"submit",children:"Save"})]})]})}),Object(E.jsxs)("div",{className:"w-100 text-center my-3 d-flex justify-content-center align-items-sm-center",children:[Object(E.jsx)(O.a,{variant:"link py-0",onClick:ae,children:"Delete profile"}),Object(E.jsx)(N.b,{to:"/",children:"Back to Dashboard"})]})]})})}function te(e){var t=e.children;return y().currentUser?t:Object(E.jsx)(_.a,{to:"/login"})}function ce(){var e=y(),t=e.currentUser,c=e.logout,n=Object(a.useState)(t),r=Object(j.a)(n,2),s=r[0],i=r[1],o=Object(a.useState)(""),u=Object(j.a)(o,2),l=u[0],b=u[1];return Object(a.useEffect)((function(){i(t)})),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(P.a,{className:"header align-items-center p-2 mb-4",children:[Object(E.jsx)("div",{className:"col-sm-6",children:Object(E.jsx)("h1",{className:"h2",children:Object(E.jsx)(N.b,{className:"text-decoration-none transition-300",to:"/",children:"Tasks Dashboard"})})}),Object(E.jsxs)("div",{className:"col-sm-6",children:[s&&Object(E.jsxs)("p",{className:"mb-0",children:["Welcome, ",s.email,"! ",Object(E.jsx)(O.a,{onClick:function(){b("");try{c().then((function(){window.location.reload()})),i(!1)}catch(e){b("Failed to log out")}},children:"Log out"})," ",Object(E.jsx)(N.b,{className:"transition-300",to:"/update-profile",children:"Update profile"})]}),!s&&Object(E.jsxs)("p",{className:"mb-0",children:[Object(E.jsx)(N.b,{className:"transition-300",to:"/login",children:"Log in"})," or ",Object(E.jsx)(N.b,{className:"transition-300",to:"/signup",children:"Sign up"})]})]})]}),l&&Object(E.jsx)(d.a,{variant:"danger",children:l})]})}var ae=function(){return Object(a.useEffect)((function(){document.title="Tasks Dashboard"}),[]),Object(E.jsx)(C.a,{children:Object(E.jsx)(N.a,{children:Object(E.jsxs)(k,{children:[Object(E.jsx)(ce,{}),Object(E.jsx)(A,{children:Object(E.jsxs)(_.d,{children:[Object(E.jsx)(_.b,{exact:!0,path:"/",element:Object(E.jsx)(Q,{})}),Object(E.jsx)(_.b,{path:"/signup",element:Object(E.jsx)(R,{})}),Object(E.jsx)(_.b,{path:"/login",element:Object(E.jsx)(X,{})}),Object(E.jsx)(_.b,{path:"/forgot-password",element:Object(E.jsx)(Z,{})}),Object(E.jsx)(_.b,{path:"/update-profile",element:Object(E.jsx)(te,{children:Object(E.jsx)(ee,{})})})]})})]})})})};c(97),c(98);s.a.render(Object(E.jsx)(n.a.StrictMode,{children:Object(E.jsx)(ae,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.698b1045.chunk.js.map