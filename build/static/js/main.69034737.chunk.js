(this["webpackJsonptasks-dashboard"]=this["webpackJsonptasks-dashboard"]||[]).push([[0],{98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),r=a(39),s=a.n(r),i=a(1),o=a.n(i),u=a(7),l=a(10),j=a(114),d=a(110),b=a(111),O=a(104),h=a(9),p=a(81),f=a(19),x=a(82),m=Object(p.a)({apiKey:"AIzaSyAXkRSFUD3VRKkQiddu5tVt99JrLXD6-Dk",authDomain:"tasks-dashboard-49705.firebaseapp.com",projectId:"tasks-dashboard-49705",storageBucket:"tasks-dashboard-49705.appspot.com",messagingSenderId:"286078125176",appId:"1:286078125176:web:c81bf246a7a075ed39598d",databaseURL:"tasks-dashboard-49705.firebaseio.com"}),v=Object(f.g)(m),g=(Object(x.a)(),a(36)),w=a(4),k=n.a.createContext(),y=Object(g.d)(m);function N(){return Object(c.useContext)(k)}function S(e){var t=e.children,a=Object(c.useState)(),n=Object(l.a)(a,2),r=n[0],s=n[1],i=Object(c.useState)(!1),j=Object(l.a)(i,2),d=j[0],b=j[1],O=Object(c.useState)(),p=Object(l.a)(O,2),x=p[0],m=p[1],N=Object(c.useState)(!0),S=Object(l.a)(N,2),U=S[0],C=S[1];function D(){return(D=Object(u.a)(o.a.mark((function e(t,a,c,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.i)(Object(f.d)(v,"users",t),{name:c,role:a,email:n}).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=Object(u.a)(o.a.mark((function e(t){var a,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.d)(v,"users",t),e.next=3,Object(f.e)(a);case 3:if(!(c=e.sent).exists()){e.next=9;break}return n=c.data().role,e.abrupt("return",n);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.f)(Object(f.b)(v,"users"));case 2:return t=e.sent,a=[],t.forEach((function(e){var t=Object(h.a)({id:e.id},e.data());a.push(t)})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(o.a.mark((function e(t){var a,c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.d)(v,"users",t),e.next=3,Object(f.e)(a);case 3:if(!(c=e.sent).exists()){e.next=9;break}return n=c.data().name,e.abrupt("return",n);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(u.a)(o.a.mark((function e(t){var a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.h)(Object(f.b)(v,"tasks"),Object(f.k)("assignedUserId","==",t)),e.next=3,Object(f.f)(a);case 3:return(c=e.sent).forEach((function(e){Object(f.j)(Object(f.d)(v,"tasks",e.id),{assignedUserId:0}).catch((function(e){console.log(e)}))})),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){return Object(g.e)(y,(function(e){s(e),e&&(T(e.uid).then((function(e){"admin"===e&&b(!0)})),E(e.uid).then((function(e){m(e)}))),C(!1)}))}),[]);var F={currentUser:r,currentUserAdmin:d,currentUserName:x,signup:function(e,t){return Object(g.b)(y,e,t)},login:function(e,t){return Object(g.h)(y,e,t)},logout:function(){return y.signOut()},resetPassword:function(e){return Object(g.g)(y,e)},updateUserName:function(e){return Object(f.j)(Object(f.d)(v,"users",r.uid),{name:e}).catch((function(e){console.log(e)}))},updateUserEmail:function(e){return Object(g.i)(y.currentUser,e).then((function(){Object(f.j)(Object(f.d)(v,"users",r.uid),{email:e})})).catch((function(e){console.log(e)}))},updateUserPassword:function(e){return Object(g.j)(y.currentUser,e)},updateUserRole:function(e){return Object(f.j)(Object(f.d)(v,"users",r.uid),{role:e}).catch((function(e){console.log(e)}))},createUserDoc:function(e,t,a,c){return D.apply(this,arguments)},getUserRole:T,getUsersList:function(){return L.apply(this,arguments)},getUserNameById:E,deleteUserAccount:function(e){var t=r.email,a=g.a.credential(t,e),c=r.uid;return Object(g.f)(y.currentUser,a).then((function(){Object(g.c)(y.currentUser)})).then((function(){Object(f.c)(Object(f.d)(v,"users",c))})).then((function(){!function(e){P.apply(this,arguments)}(c)}))}};return Object(w.jsx)(k.Provider,{value:F,children:!U&&t})}var U=a(18),C=a(26);function D(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(c.useRef)(),s=N(),i=s.signup,h=s.createUserDoc,p=Object(c.useState)(""),f=Object(l.a)(p,2),x=f[0],m=f[1],v=Object(c.useState)(!1),g=Object(l.a)(v,2),k=g[0],y=g[1],S=Object(U.g)();function D(){return D=Object(u.a)(o.a.mark((function c(s){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(s.preventDefault(),a.current.value===n.current.value){c.next=3;break}return c.abrupt("return",m("Passwords do not match"));case 3:return c.prev=3,m(""),y(!0),c.next=8,i(t.current.value,a.current.value).then((function(a){h(a.user.uid,r.current.value,e.current.value,t.current.value)})).then((function(){y(!1),S("/")})).catch((function(e){var t=e.code,a=e.message;m("auth/weak-password"===t?"The password is too weak.":a)}));case 8:c.next=14;break;case 10:c.prev=10,c.t0=c.catch(3),console.log(c.t0.message),m("Failed to create an account");case 14:case"end":return c.stop()}}),c,null,[[3,10]])}))),D.apply(this,arguments)}return Object(w.jsxs)("div",{className:"card-container mx-auto",children:[Object(w.jsx)(j.a,{children:Object(w.jsxs)(j.a.Body,{children:[Object(w.jsx)("h2",{className:"text-center",children:"Sign Up"}),x&&Object(w.jsx)(d.a,{variant:"danger",children:x}),Object(w.jsxs)(b.a,{onSubmit:function(e){return D.apply(this,arguments)},children:[Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"name",children:[Object(w.jsx)(b.a.Label,{children:"Name"}),Object(w.jsx)(b.a.Control,{type:"text",placeholder:"Enter name",ref:e,required:!0})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"email",children:[Object(w.jsx)(b.a.Label,{children:"Email address"}),Object(w.jsx)(b.a.Control,{type:"email",placeholder:"Enter email",ref:t,required:!0})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"password",children:[Object(w.jsx)(b.a.Label,{children:"Password"}),Object(w.jsx)(b.a.Control,{type:"password",placeholder:"Password",ref:a,required:!0})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"password-confirm",children:[Object(w.jsx)(b.a.Label,{children:"Confirm your Password"}),Object(w.jsx)(b.a.Control,{type:"password",placeholder:"Password",ref:n,required:!0})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"role",children:[Object(w.jsx)(b.a.Label,{children:"Role"}),Object(w.jsxs)(b.a.Select,{ref:r,children:[Object(w.jsx)("option",{value:"admin",children:"Admin"}),Object(w.jsx)("option",{value:"user",children:"User"})]})]}),Object(w.jsx)(O.a,{disabled:k,variant:"primary",type:"submit",children:"Submit"})]})]})}),Object(w.jsxs)("div",{className:"w-100 text-center mt-3",children:["Already have an account? ",Object(w.jsx)(C.b,{to:"/login",children:"Log in"})]})]})}var T=a(108),R=n.a.createContext();function L(){return Object(c.useContext)(R)}function E(e){var t=e.children,a=Object(c.useState)(),n=Object(l.a)(a,2),r=n[0],s=n[1],i=Object(c.useState)(!0),j=Object(l.a)(i,2),d=j[0],b=j[1];function O(){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.f)(Object(f.b)(v,"tasks"));case 2:return t=e.sent,a=[],t.forEach((function(e){var t=Object(h.a)({id:e.id},e.data());a.push(t)})),s(a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){O().then((function(){b(!1)}))}),[]);var x={tasks:r,getTasks:O,setStatus:function(e,t){var a=Object(f.d)(v,"tasks",e);return Object(f.j)(a,{status:t}).catch((function(e){console.log(e.message)})),O().then((function(e){s(e),b(!1)})),r},addTask:function(e,t,a){return Object(f.a)(Object(f.b)(v,"tasks"),{assignedUserId:a,content:e,title:t,status:"to do"}).catch((function(e){console.log(e)}))},updateTask:function(e,t,a,c){return Object(f.j)(Object(f.d)(v,"tasks",e),{assignedUserId:c,content:t,title:a}).catch((function(e){console.log(e)}))},deleteTask:function(e){return Object(f.c)(Object(f.d)(v,"tasks",e))}};return Object(w.jsx)(R.Provider,{value:x,children:!d&&t})}var A=a(106),P=a(112),F=function(e){var t=e.onDrop,a=e.children,c=e.status,n=Object(P.a)((function(){return{accept:"TASKCARD",drop:function(e,a){t(e.id,a,c)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}})),r=Object(l.a)(n,2),s=r[0],i=s.canDrop,o=s.isOver,u=r[1];return Object(w.jsx)("div",{ref:u,className:"column col-md-3 py-2",children:Object(w.jsxs)("div",{className:"p-3 h-100 position-relative",style:{backgroundColor:o?"#ffff9494":"rgb(197 237 255 / 44%)"},children:[a,i?"Release to drop":""]})})},G=a(113),B=a(73);function I(e){var t=e.item,a=e.index,n=e.color,r=e.isDraggable,s=Object(c.useState)(),i=Object(l.a)(s,2),o=i[0],u=i[1],d=N().getUserNameById,b=Object(G.a)((function(){return{type:"TASKCARD",item:Object(h.a)({id:a},t),canDrag:function(){return r},collect:function(e){return{isDragging:e.isDragging()}}}})),O=Object(l.a)(b,2),p=O[0].isDragging,f=O[1];return t.assignedUserId&&d(t.assignedUserId).then((function(e){u(e)})),Object(w.jsx)(j.a,{className:"task-card mb-2 position-relative",ref:f,"data-id":t.id,bg:"light",style:{opacity:p?.5:1},children:Object(w.jsxs)(j.a.Body,{className:"py-4",children:[o&&Object(w.jsx)(B.a,{bg:"secondary",className:"assignee position-absolute top-0 start-0",children:Object(w.jsx)("i",{children:o})}),Object(w.jsx)(B.a,{bg:n,className:"item-status position-absolute top-0 end-0",children:t.status}),Object(w.jsx)(j.a.Title,{className:"item-title mb-0 h6 transition-300",children:t.title})]})})}var q=[{id:0,status:"to do",color:"primary"},{id:1,status:"in progress",color:"warning"},{id:2,status:"in review",color:"info"},{id:3,status:"done",color:"success"}],H=a(107),V=a(86),K=a(109);function J(e){var t=e.show,a=e.setShowModal,n=e.updateTasks,r=Object(c.useRef)(),s=Object(c.useRef)(),i=Object(c.useRef)(),o=N().getUsersList,u=Object(c.useState)(),j=Object(l.a)(u,2),h=j[0],p=j[1],f=Object(c.useState)(!0),x=Object(l.a)(f,2),m=x[0],v=x[1],g=L().addTask,k=Object(c.useState)(""),y=Object(l.a)(k,2),S=y[0],U=y[1],C=Object(c.useState)(""),D=Object(l.a)(C,2),T=D[0],R=D[1];return Object(c.useEffect)((function(){o().then((function(e){p(e),v(!1)}))}),[]),Object(w.jsxs)(w.Fragment,{children:[T&&Object(w.jsx)(d.a,{variant:"danger",children:T}),S&&Object(w.jsx)(d.a,{variant:"success",children:S}),!m&&Object(w.jsxs)(K.a,{show:t,onHide:function(){a()},children:[Object(w.jsx)(K.a.Header,{closeButton:!0,children:Object(w.jsx)(K.a.Title,{children:"Add New Task"})}),Object(w.jsx)(K.a.Body,{children:Object(w.jsxs)(b.a,{onSubmit:function(e){e.preventDefault(),R(""),U("");var t=r.current.value,c=s.current.value,o=0;i.current.value&&(o=i.current.value),c&&t&&g(c,t,o).then((function(){U("Task was added to dashboard."),n(),a()}))},children:[Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"title",children:[Object(w.jsx)(b.a.Label,{children:"Title"}),Object(w.jsx)(b.a.Control,{type:"text",placeholder:"Enter title",ref:r,required:!0})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"content",children:[Object(w.jsx)(b.a.Label,{children:"Content"}),Object(w.jsx)(b.a.Control,{as:"textarea",placeholder:"Enter content",ref:s,required:!0})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"user",children:[Object(w.jsx)(b.a.Label,{children:"Assign user"}),Object(w.jsx)(b.a.Select,{ref:i,children:h.map((function(e){return Object(w.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(w.jsx)(O.a,{variant:"primary",type:"submit",children:"Add Task"})]})})]})]})}var M=a(74);function X(e){var t=e.show,a=e.showEditTask,n=e.item,r=Object(c.useRef)(),s=Object(c.useRef)(),i=Object(c.useRef)(),j=N().getUsersList,h=Object(c.useState)(),p=Object(l.a)(h,2),f=p[0],x=p[1],m=Object(c.useState)(!0),v=Object(l.a)(m,2),g=v[0],k=v[1],y=L().updateTask,S=Object(c.useState)(""),U=Object(l.a)(S,2),C=U[0],D=U[1],T=Object(c.useState)(""),R=Object(l.a)(T,2),E=R[0],A=R[1];function P(){return(P=Object(u.a)(o.a.mark((function e(t){var c,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),A(""),D(""),c=r.current.value,u=s.current.value,l=0,i.current.value&&(l=i.current.value),!u||!c){e.next=10;break}return e.next=10,y(n.id,u,c,l).then((function(){D("Task ".concat(n.title," was successfully updated.")),a()})).catch((function(){A("Failed to upade the task.")}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){j().then((function(e){x(e),k(!1)}))}),[]),Object(w.jsxs)(w.Fragment,{children:[E&&Object(w.jsx)(d.a,{variant:"danger",children:E}),C&&Object(w.jsx)(d.a,{variant:"success",children:C}),n&&!g&&Object(w.jsxs)(K.a,{show:t,onHide:function(){a()},children:[Object(w.jsx)(K.a.Header,{closeButton:!0,children:Object(w.jsxs)(K.a.Title,{children:["Edit Task: ",n.title]})}),Object(w.jsx)(K.a.Body,{children:Object(w.jsxs)(b.a,{onSubmit:function(e){return P.apply(this,arguments)},children:[Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"title",children:[Object(w.jsx)(b.a.Label,{children:"Title"}),Object(w.jsx)(b.a.Control,{type:"text",placeholder:"Enter title",ref:r,defaultValue:n.title,required:!0})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"content",children:[Object(w.jsx)(b.a.Label,{children:"Content"}),Object(w.jsx)(b.a.Control,{as:"textarea",placeholder:"Enter content",ref:s,defaultValue:n.content,required:!0})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"user",children:[Object(w.jsx)(b.a.Label,{children:"Assigned user"}),Object(w.jsx)(b.a.Select,{ref:i,defaultValue:n.assignedUserId,children:f.map((function(e){return Object(w.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(w.jsx)(O.a,{variant:"primary",type:"submit",children:"Save"})]})})]})]})}function z(e){var t=e.show,a=e.showTaskDetails,n=e.item,r=e.color,s=e.assignedUser,i=e.handleUpdateTasks,j=e.closeTask,b=e.admin,h=Object(c.useState)(""),p=Object(l.a)(h,2),f=p[0],x=p[1],m=Object(c.useState)(""),v=Object(l.a)(m,2),g=v[0],k=v[1],y=Object(c.useState)(!1),N=Object(l.a)(y,2),S=N[0],U=N[1],C=Object(c.useState)(!1),D=Object(l.a)(C,2),T=D[0],R=D[1],E=L().deleteTask;function A(){j(),i(),U(!S)}function P(){return(P=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(n.id).then((function(){F(),i(),x("Task ".concat(n.title," was sucessfully deleted."))})).catch((function(){k("Failed to delete the task.")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){R(!T)}return Object(w.jsxs)(w.Fragment,{children:[g&&Object(w.jsx)(d.a,{variant:"danger",children:g}),f&&Object(w.jsx)(d.a,{variant:"success",children:f}),n&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(X,{show:S,showEditTask:A,item:n}),Object(w.jsx)(K.a,{show:T,onHide:F,children:Object(w.jsxs)(K.a.Body,{children:[Object(w.jsxs)("p",{children:["Are you sure you want to delete the task ",Object(w.jsx)("b",{children:n.title}),"?"]}),Object(w.jsx)(O.a,{variant:"primary me-2",onClick:function(){return P.apply(this,arguments)},children:"Delete"}),Object(w.jsx)(O.a,{variant:"primary",onClick:F,children:"Cancel"})]})}),Object(w.jsxs)(K.a,{show:t,onHide:function(){j()},children:[Object(w.jsx)(K.a.Header,{closeButton:!0,children:Object(w.jsx)(K.a.Title,{children:n.title})}),Object(w.jsx)(K.a.Body,{children:Object(w.jsxs)("div",{className:"task mb-2 position-relative",bg:"light",children:[Object(w.jsx)(B.a,{bg:r,className:"item-status mb-2",children:n.status}),Object(w.jsx)("div",{className:"item-text",children:n.content}),s&&Object(w.jsxs)("div",{className:"assigned",children:[Object(w.jsx)("b",{children:"Assignee:"})," ",s]}),b&&Object(w.jsxs)("div",{className:"task-footer d-flex pt-2",children:[Object(w.jsx)(O.a,{variant:"link btn-icon me-2",onClick:function(){a(),R(!T)},children:Object(w.jsx)(M.b,{})}),Object(w.jsx)(O.a,{variant:"link btn-icon",onClick:A,children:Object(w.jsx)(M.a,{})})]})]})})]})]})]})}var Q=a(85);function W(){var e=N(),t=e.currentUser,a=e.getUserNameById,n=e.currentUserAdmin,r=e.getUserRole,s=Object(c.useState)(t),i=Object(l.a)(s,2),o=i[0],u=i[1],j=L(),d=j.tasks,b=j.getTasks,h=j.setStatus,p=Object(c.useState)(d),f=Object(l.a)(p,2),x=f[0],m=f[1],v=Object(c.useState)(n),g=Object(l.a)(v,2),k=g[0],y=g[1],S=Object(c.useState)(!1),U=Object(l.a)(S,2),C=U[0],D=U[1],T=function(e,t,a){h(e,a),oe()},R=Object(c.useState)(!1),E=Object(l.a)(R,2),P=E[0],G=E[1],B=Object(c.useState)(!1),K=Object(l.a)(B,2),M=K[0],X=K[1],W=Object(c.useState)(),Y=Object(l.a)(W,2),Z=Y[0],$=Y[1],_=Object(c.useState)(),ee=Object(l.a)(_,2),te=ee[0],ae=ee[1],ce=Object(c.useState)(),ne=Object(l.a)(ce,2),re=ne[0],se=ne[1];Object(c.useEffect)((function(){t&&(D(!0),r(t.uid).then((function(e){null===e&&u(!1),y("admin"===e)})).then((function(){D(!1)})))}),[]);var ie=function(){G(!P)},oe=function(){b().then((function(e){m(e)}))},ue=function(e){if(e){var t=e.target.parentNode.getAttribute("data-id"),c=d.find((function(e){return e.id===t}));c.assignedUserId&&a(c.assignedUserId).then((function(e){ae(e)}));var n=q.find((function(e){return e.status===c.status}));se(n.color),$(c)}X(!M)};return Object(w.jsx)("div",{children:!C&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J,{show:P,setShowModal:ie,updateTasks:oe}),Object(w.jsx)(z,{show:M,showTaskDetails:ue,closeTask:function(){X(!1)},item:Z,assignedUser:te,handleUpdateTasks:oe,color:re,admin:k}),Object(w.jsx)(A.a,{className:"mt-4",children:Object(w.jsx)(H.a,{backend:V.a,children:q.map((function(e,t){return Object(w.jsxs)(F,{onDrop:T,status:e.status,children:[0===t&&k?Object(w.jsx)(O.a,{variant:"link",className:"btn-icon btn-add",onClick:ie,children:Object(w.jsx)(Q.a,{})}):"",Object(w.jsx)("h3",{className:"h5 col-header text-center pb-1",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),x.filter((function(t){return t.status===e.status})).map((function(t,a){return Object(w.jsx)("div",{className:"task-container",onClick:ue,children:o?Object(w.jsx)(I,{item:t,index:a,color:e.color,isDraggable:!0},t.id):Object(w.jsx)(I,{item:t,index:a,color:e.color,isDraggable:!1},t.id)},t.id)}))]},e.id)}))})})]})})}function Y(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=N().login,n=Object(c.useState)(""),r=Object(l.a)(n,2),s=r[0],i=r[1],h=Object(c.useState)(!1),p=Object(l.a)(h,2),f=p[0],x=p[1],m=Object(U.g)();function v(){return v=Object(u.a)(o.a.mark((function c(n){return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,i(""),x(!0),c.next=6,a(e.current.value,t.current.value).catch((function(e){var t=e.code,a=e.message;i("auth/weak-password"===t?"The password is too weak.":a)}));case 6:m("/"),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),i("Failed to log in");case 12:x(!1);case 13:case"end":return c.stop()}}),c,null,[[1,9]])}))),v.apply(this,arguments)}return Object(w.jsxs)("div",{className:"card-container mx-auto",children:[Object(w.jsx)(j.a,{className:"mt-4",children:Object(w.jsxs)(j.a.Body,{children:[Object(w.jsx)("h2",{className:"text-center",children:"Log In"}),s&&Object(w.jsx)(d.a,{variant:"danger",children:s}),Object(w.jsxs)(b.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"email",children:[Object(w.jsx)(b.a.Label,{children:"Email address"}),Object(w.jsx)(b.a.Control,{type:"email",placeholder:"Enter email",ref:e,required:!0})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"password",children:[Object(w.jsx)(b.a.Label,{children:"Password"}),Object(w.jsx)(b.a.Control,{type:"password",placeholder:"Password",ref:t,required:!0})]}),Object(w.jsx)(O.a,{disabled:f,variant:"primary",type:"submit",children:"Log In"})]}),Object(w.jsx)("div",{className:"w-100 text-center",children:Object(w.jsx)(C.b,{to:"/forgot-password",children:"Forgot password?"})})]})}),Object(w.jsxs)("div",{className:"w-100 text-center mt-3",children:["Don't have an account? ",Object(w.jsx)(C.b,{to:"/signup",children:"Sign up"})]})]})}function Z(){var e=Object(c.useRef)(),t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),i=Object(l.a)(s,2),h=i[0],p=i[1],f=Object(c.useState)(!1),x=Object(l.a)(f,2),m=x[0],v=x[1],g=N().resetPassword;function k(){return(k=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,p(""),r(""),v(!0),t.next=7,g(e.current.value);case 7:p("Further instructions were sent to your email."),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r("Failed to reset password");case 13:v(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.a,{children:Object(w.jsxs)(j.a.Body,{children:[Object(w.jsx)("h2",{className:"text-center",children:"Forgot password"}),n&&Object(w.jsx)(d.a,{variant:"danger",children:n}),h&&Object(w.jsx)(d.a,{variant:"success",children:h}),Object(w.jsxs)(b.a,{onSubmit:function(e){return k.apply(this,arguments)},children:[Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"email",children:[Object(w.jsx)(b.a.Label,{children:"Email address"}),Object(w.jsx)(b.a.Control,{type:"email",placeholder:"Enter email",ref:e,required:!0})]}),Object(w.jsx)(O.a,{disabled:m,variant:"primary",type:"submit",children:"Reset password"})]})]})}),Object(w.jsxs)("div",{className:"w-100 text-center mt-3",children:[Object(w.jsx)("p",{children:Object(w.jsx)(C.b,{to:"/login",children:"Log in"})}),Object(w.jsx)("p",{children:Object(w.jsx)(C.b,{to:"/",children:"Go to Dashboard"})})]})]})}var $=a(8);function _(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(c.useRef)(),s=Object(c.useRef)(),i=N(),h=i.currentUser,p=i.currentUserAdmin,f=i.currentUserName,x=i.getUserRole,m=i.getUserNameById,v=i.updateUserName,g=i.updateUserPassword,k=i.updateUserEmail,y=i.updateUserRole,S=i.deleteUserAccount,D=Object(c.useState)(""),T=Object(l.a)(D,2),R=T[0],L=T[1],E=Object(c.useState)(""),A=Object(l.a)(E,2),P=A[0],F=A[1],G=Object(c.useState)(!1),B=Object(l.a)(G,2),I=B[0],q=B[1],H=Object(U.g)(),V=Object(c.useState)(p?"admin":"user"),J=Object(l.a)(V,2),M=J[0],X=J[1],z=Object(c.useState)(f),Q=Object(l.a)(z,2),W=Q[0],Y=Q[1],Z=Object(c.useState)(!1),_=Object(l.a)(Z,2),ee=_[0],te=_[1];function ae(){return(ae=Object(u.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),L(""),!e.current.value){t.next=13;break}return t.prev=3,t.next=6,S(e.current.value).then((function(){H("/")})).catch((function(e){var t=e.message;console.log(e),ce(),L("Failed to delete account : "+t)}));case 6:t.next=13;break;case 8:t.prev=8,t.t0=t.catch(3),console.log(t.t0),ce(),L("Failed to delete account");case 13:case"end":return t.stop()}}),t,null,[[3,8]])})))).apply(this,arguments)}function ce(){te(!ee)}return Object(c.useEffect)((function(){q(!0),m(h.uid).then((function(e){Y(e)})),x(h.uid).then((function(e){X(e)})).then((function(){q(!1)}))}),[]),Object(w.jsx)("div",{className:"card-container mx-auto",children:!I&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(K.a,{className:"text-center",show:ee,onHide:ce,children:Object(w.jsxs)(K.a.Body,{children:[Object(w.jsx)("p",{children:"Are you sure you want to delete your account?"}),Object(w.jsxs)(b.a,{onSubmit:function(e){return ae.apply(this,arguments)},children:[Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"relogPassword",children:[Object(w.jsx)(b.a.Label,{children:"Password"}),Object(w.jsx)(b.a.Control,Object($.a)({type:"password",placeholder:"Password",ref:e},"placeholder","Please enter your password"))]}),Object(w.jsx)(O.a,{variant:"primary mb-2",type:"submit",children:"Delete"})]}),Object(w.jsx)(O.a,{variant:"primary",onClick:ce,children:"Cancel"})]})}),Object(w.jsx)(j.a,{className:"mt-4",children:Object(w.jsxs)(j.a.Body,{children:[Object(w.jsx)("h2",{className:"text-center",children:"Update profile"}),R&&Object(w.jsx)(d.a,{variant:"danger",children:R}),P&&Object(w.jsx)(d.a,{variant:"sucess",children:P}),Object(w.jsxs)(b.a,{onSubmit:function(e){if(e.preventDefault(),n.current.value!==r.current.value)return L("Passwords do not match");var c=[];L(""),F(""),q(!0),t.current.value!==W&&c.push(v(t.current.value)),a.current.value!==h.email&&c.push(k(a.current.value)),n.current.value&&c.push(g(n.current.value)),s.current.value!==M&&c.push(y(s.current.value)),Promise.all(c).then((function(){F("Your profile was updated."),H("/")})).catch((function(){L("Failed to update an account")}))},children:[Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"name",children:[Object(w.jsx)(b.a.Label,{children:"Name"}),Object(w.jsx)(b.a.Control,{type:"text",placeholder:"Enter name",ref:t,defaultValue:W})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"email",children:[Object(w.jsx)(b.a.Label,{children:"Email address"}),Object(w.jsx)(b.a.Control,{type:"email",placeholder:"Enter email",ref:a,defaultValue:h.email})]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"password",children:[Object(w.jsx)(b.a.Label,{children:"Password"}),Object(w.jsx)(b.a.Control,Object($.a)({type:"password",placeholder:"Password",ref:n},"placeholder","Leave blank to keep the same"))]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"password-confirm",children:[Object(w.jsx)(b.a.Label,{children:"Confirm your Password"}),Object(w.jsx)(b.a.Control,Object($.a)({type:"password",placeholder:"Confirm Password",ref:r},"placeholder","Leave blank to keep the same"))]}),Object(w.jsxs)(b.a.Group,{className:"mb-3",id:"role",children:[Object(w.jsx)(b.a.Label,{children:"Role"}),Object(w.jsxs)(b.a.Select,{ref:s,defaultValue:M,children:[Object(w.jsx)("option",{value:"admin",children:"Admin"}),Object(w.jsx)("option",{value:"user",children:"User"})]})]}),Object(w.jsx)(O.a,{disabled:I,variant:"primary",type:"submit",children:"Save"})]})]})}),Object(w.jsxs)("div",{className:"w-100 text-center my-3 d-flex justify-content-center align-items-sm-center",children:[Object(w.jsx)(O.a,{variant:"link py-0",onClick:ce,children:"Delete profile"}),Object(w.jsx)(C.b,{to:"/",children:"Back to Dashboard"})]})]})})}function ee(e){var t=e.children;return N().currentUser?t:Object(w.jsx)(U.a,{to:"/login"})}function te(){var e=N(),t=e.currentUser,a=e.logout,n=Object(c.useState)(t),r=Object(l.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(""),u=Object(l.a)(o,2),j=u[0],b=u[1];return Object(c.useEffect)((function(){i(t)})),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{className:"py-2 mb-4",children:Object(w.jsxs)(A.a,{className:"header align-items-center",children:[Object(w.jsx)("div",{className:"col-sm-4",children:Object(w.jsx)("h1",{className:"h2",children:Object(w.jsx)(C.b,{className:"text-decoration-none transition-300",to:"/",children:"Tasks Dashboard"})})}),Object(w.jsxs)("div",{className:"col-sm-8 header-text",children:[s&&Object(w.jsxs)("p",{className:"mb-0",children:["Welcome, ",s.email,"! ",Object(w.jsx)(O.a,{onClick:function(){b("");try{a().then((function(){window.location.reload()})),i(!1)}catch(e){b("Failed to log out")}},children:"Log out"})," ",Object(w.jsx)(C.b,{className:"transition-300",to:"/update-profile",children:"Update profile"})]}),!s&&Object(w.jsxs)("p",{className:"mb-0",children:[Object(w.jsx)(C.b,{className:"transition-300",to:"/login",children:"Log in"})," or ",Object(w.jsx)(C.b,{className:"transition-300",to:"/signup",children:"Sign up"})]})]})]})}),j&&Object(w.jsx)(d.a,{variant:"danger",children:j})]})}var ae=function(){return Object(c.useEffect)((function(){document.title="Tasks Dashboard"}),[]),Object(w.jsx)(T.a,{children:Object(w.jsx)(C.a,{children:Object(w.jsxs)(S,{children:[Object(w.jsx)(te,{}),Object(w.jsx)(E,{children:Object(w.jsxs)(U.d,{children:[Object(w.jsx)(U.b,{exact:!0,path:"/",element:Object(w.jsx)(W,{})}),Object(w.jsx)(U.b,{path:"/signup",element:Object(w.jsx)(D,{})}),Object(w.jsx)(U.b,{path:"/login",element:Object(w.jsx)(Y,{})}),Object(w.jsx)(U.b,{path:"/forgot-password",element:Object(w.jsx)(Z,{})}),Object(w.jsx)(U.b,{path:"/update-profile",element:Object(w.jsx)(ee,{children:Object(w.jsx)(_,{})})})]})})]})})})};a(97),a(98);s.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(ae,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.69034737.chunk.js.map